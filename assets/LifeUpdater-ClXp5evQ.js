import{V as w}from"./ValueWithRandom-23isO9Zw.js";import{s as a,H as l,G as f,p as r,I as c}from"./ParticlesComponent-lXlvNY8E.js";import"./AnimationOptions-DLmKw3mK.js";import"./index-D-FyKvQZ.js";import"./motion-C0bLFgY8.js";class R extends w{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class L extends w{constructor(){super(),this.sync=!1}load(e){e&&(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class V{constructor(){this.count=0,this.delay=new R,this.duration=new L}load(e){e&&(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const u=0,x=-1,y=0,m=0;function F(i,e,t){if(!i.life)return;const n=i.life;let o=!1;if(i.spawning)if(n.delayTime+=e.value,n.delayTime>=i.life.delay)o=!0,i.spawning=!1,n.delayTime=u,n.time=u;else return;if(n.duration===x||i.spawning||(o?n.time=u:n.time+=e.value,n.time<n.duration))return;if(n.time=u,i.life.count>y&&i.life.count--,i.life.count===y){i.destroy();return}const T=a(m,t.width),v=a(m,t.width);i.position.x=l(T),i.position.y=l(v),i.spawning=!0,n.delayTime=u,n.time=u,i.reset();const d=i.options.life;d&&(n.delay=f(d.delay.value)*r,n.duration=f(d.duration.value)*r)}const s=0,h=1,g=-1;class I{constructor(e){this.container=e}init(e){const t=this.container,n=e.options,o=n.life;o&&(e.life={delay:t.retina.reduceFactor?f(o.delay.value)*(o.delay.sync?h:c())/t.retina.reduceFactor*r:s,delayTime:s,duration:t.retina.reduceFactor?f(o.duration.value)*(o.duration.sync?h:c())/t.retina.reduceFactor*r:s,time:s,count:o.count},e.life.duration<=s&&(e.life.duration=g),e.life.count<=s&&(e.life.count=g),e.life&&(e.spawning=e.life.delay>s))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new V);for(const n of t)e.life.load(n==null?void 0:n.life)}update(e,t){!this.isEnabled(e)||!e.life||F(e,t,this.container.canvas.size)}}export{I as LifeUpdater};
